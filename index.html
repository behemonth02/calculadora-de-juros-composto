function calcular() {
    // Ocultar o exemplo
    document.getElementById('exemplo').style.display = 'none';

    // Capturar valores
    const numeroParcelas = parseFloat(document.getElementById('numeroParcelas').value);
    const taxaJuros = parseFloat(document.getElementById('taxaJuros').value) / 100;
    const valorPrestacao = document.getElementById('valorPrestacao').value ? 
        parseFloat(document.getElementById('valorPrestacao').value.replace(',', '.')) : null;
    const valorFinanciado = document.getElementById('valorFinanciado').value ? 
        parseFloat(document.getElementById('valorFinanciado').value.replace(',', '.')) : null;

    // Validar campos obrigatórios
    if (isNaN(numeroParcelas) || numeroParcelas <= 0) {
        alert('Por favor, insira um número válido de parcelas (maior que 0).');
        return;
    }
    if (isNaN(taxaJuros) || taxaJuros <= 0) {
        alert('Por favor, insira uma taxa de juros válida (maior que 0).');
        return;
    }
    
    // Verificar qual o terceiro campo foi preenchido
    if (valorPrestacao !== null && valorFinanciado !== null) {
        alert('Por favor, preencha apenas o valor da prestação OU o valor financiado, não ambos.');
        return;
    } else if (valorPrestacao === null && valorFinanciado === null) {
        alert('Por favor, preencha o valor da prestação OU o valor financiado.');
        return;
    }

    // Se o valor financiado for fornecido, calcular a prestação
    if (valorFinanciado !== null) {
        const prestacaoCalculada = (valorFinanciado * taxaJuros) / (1 - Math.pow(1 + taxaJuros, -numeroParcelas));
        document.getElementById('valorPrestacao').value = prestacaoCalculada.toFixed(2).replace('.', ',');
    } 
    // Se o valor da prestação for fornecido, calcular o valor financiado
    else if (valorPrestacao !== null) {
        const valorFinanciadoCalculado = valorPrestacao * ((1 - Math.pow(1 + taxaJuros, -numeroParcelas)) / taxaJuros);
        document.getElementById('valorFinanciado').value = valorFinanciadoCalculado.toFixed(2).replace('.', ',');
    }

    // Exibir resultado
    const resultadoDiv = document.getElementById('resultado');
    resultadoDiv.innerHTML = `
        <h3>Resultado do Financiamento</h3>
        <p>Número de Parcelas: ${numeroParcelas}</p>
        <p>Taxa de Juros Mensal: ${(taxaJuros * 100).toFixed(2)}%</p>
        <p>Valor da Prestação: R$ ${document.getElementById('valorPrestacao').value}</p>
        <p>Valor Financiado: R$ ${document.getElementById('valorFinanciado').value}</p>
        <p>Valor Total a Pagar: R$ ${(parseFloat(document.getElementById('valorPrestacao').value.replace(',', '.')) * numeroParcelas).toFixed(2).replace('.', ',')}</p>
        <p>Total de Juros: R$ ${(parseFloat(document.getElementById('valorPrestacao').value.replace(',', '.')) * numeroParcelas - parseFloat(document.getElementById('valorFinanciado').value.replace(',', '.'))).toFixed(2).replace('.', ',')}</p>
    `;
    resultadoDiv.style.display = 'block';
}
